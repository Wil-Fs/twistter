{% extends 'twistter/base.html' %}
{% load static %}
{% block content %}
	
	<div class="container">
		<div class="row">
			<div class="col-8">
				<h1>Search Profiles</h1>
				<br>
			
			<div class="col-8">
				<form method="POST">
					{% csrf_token %}
					<div>
						<input type="text" name="search" class="form-control">
					</div>
					<br>
					<button type="submit" class="btn btn-primary">Search Profile</button>
				</form>
				<br>
				<br>
				
				{% if searched %}
					{% for result in searched %}
						<div class="card mb-3" style="max-width: 540px;">
						  <div class="row g-0">
						    {% if result.profile.profile_image %}
								<div class="col-md-4">
						            <img src="{{ result.profile.profile_image.url }}" class="img-fluid rounded-start" alt="Profile picture">
						        </div>
							{% else %}
							    <div class="col-md-4">
								    <img src="{% static 'images/default_profile_pic.png' %}" class="img-fluid rounded-start" alt="Profile picture">
							    </div>
							{% endif %}
						    <div class="col-md-8">
						      <div class="card-body">
						        <h5 class="card-title">{{ result.profile.user.username }}</h5>
						        <a class="card-text" href="{% url 'profile' result.profile.user.id%}">@{{ result.profile.user.username|lower }} </a>
						        <p class="card-text"><small class="text-body-secondary">Last Updated: {{ result.profile.date_modified }}</small></p>
							    <br>
							    {% if profile in user.profile.follows.all %}
					                <a href="{% url 'unfollow' result.profile.user.id %}">U</a> <br>
					            {% else %}
					                <a href="{% url 'follow' result.profile.user.id %}">F</a> <br>
					            {% endif %}
						      </div>
						    </div>
						  </div>
						</div>
						<br/>
					{% endfor %}
				{% endif %}
				
				
			</div>
		</div>
		
	</div>
{% endblock %}